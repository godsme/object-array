cmake_minimum_required(VERSION 3.19)
project(object_array)

#set(CMAKE_CXX_COMPILER "g++-10")

set(CMAKE_CXX_STANDARD 17)

include_directories(
        "${CMAKE_CURRENT_SOURCE_DIR}/include"
        "${CMAKE_CURRENT_SOURCE_DIR}/third-party"
)

if (CMAKE_CXX_COMPILER_ID MATCHES "Clang")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wdeprecated -frelaxed-template-template-args")
endif()

set(OBJ_ARRAY_SRC include/l0-infra/object-array/concept/SimpleFind.h include/l0-infra/object-array/concept/Pred.h include/l0-infra/object-array/mixin/NonScopedSimpleFind.h include/l0-infra/object-array/concept/RangedArrayLike.h test/ut/cub/array/UnscopedSimpleFindTest.cpp include/l0-infra/object-array/mixin/SimpleFindExt.h include/l0-infra/base/InvokeConstMethod.h include/l0-infra/object-array/mixin/RangedArrayLike.h include/l0-infra/object-array/holder/ScatteredArrayDataHolder.h include/l0-infra/base/Placement.h include/l0-infra/base/detail/StorageTrait.h include/l0-infra/base/DeduceSizeType.h include/l0-infra/base/DeduceOffsetType.h include/l0-infra/object-array/holder/detail/DeduceElemType.h include/l0-infra/object-array/holder/ArrayDataHolder.h include/l0-infra/object-array/holder/ObjectArrayDataHolder.h include/l0-infra/base/IntBitSet.h include/l0-infra/base/detail/DeduceBitSetIntType.h include/l0-infra/base/BitSet.h include/l0-infra/object-array/holder/detail/ObjectTrait.h test/ut/cub/array/ObjectArrayDataHolderTest.cpp test/ut/cub/array/ScatteredArrayDataHolderTest.cpp include/l0-infra/object-array/concept/ArrayLike.h include/l0-infra/object-array/mixin/RangedArray.h include/l0-infra/object-array/mixin/detail/Mixins.h include/l0-infra/object-array/mixin/ContinuousArrayLike.h include/l0-infra/object-array/concept/ContinuousArrayLikeDataHolder.h include/l0-infra/object-array/concept/SimpleArrayLike.h test/ut/cub/array/ObjectArrayTest.cpp include/l0-infra/object-array/mixin/ScopedSimpleFind.h include/l0-infra/object-array/concept/ScopedArrayLike.h include/l0-infra/object-array/mixin/ScopedFind.h test/ut/cub/array/ScopedSimpleFindTest.cpp include/l0-infra/object-array/ScatteredArray.h test/ut/cub/array/ScatteredArrayTest.cpp include/l0-infra/object-array/ObjectArray.h include/l0-infra/object-array/holder/ArrayViewDataHolder.h include/l0-infra/object-array/holder/detail/ViewElemTrait.h include/l0-infra/object-array/ArrayView.h include/l0-infra/object-array/holder/detail/ArrayDataHolderInterface.h include/l0-infra/object-array/detail/ContinuousArrayMixin.h include/l0-infra/object-array/holder/RangedViewDataHolder.h include/l0-infra/object-array/view/Slice.h test/ut/cub/array/SliceTest.cpp include/l0-infra/object-array/concept/IndexedContainer.h include/l0-infra/object-array/view/ScopedView.h include/l0-infra/object-array/mixin/IndexedContainer.h include/l0-infra/object-array/mixin/RangedViewFactory.h test/ut/cub/array/ArrayViewTest.cpp include/l0-infra/object-array/ArrayOffset.h include/l0-infra/object-array/holder/ScopedViewDataHolder.h include/l0-infra/object-array/mixin/ScopedViewFactory.h include/l0-infra/object-array/view/IndexedView.h include/l0-infra/object-array/holder/IndexedViewDataHolder.h include/l0-infra/object-array/holder/detail/RangedViewDataHolderInterface.h include/l0-infra/object-array/detail/CrtpHelper.h include/l0-infra/object-array/holder/detail/ArrayLikeViewDataHolder.h include/l0-infra/object-array/mixin/IndexedViewFactory.h include/l0-infra/object-array/mixin/IterableIndexedArrayLike.h include/l0-infra/object-array/iterator/Iterator.h include/l0-infra/object-array/iterator/IndexedIterator.h include/l0-infra/object-array/mixin/IterableArrayLike.h include/l0-infra/object-array/view/IndexedScopedView.h include/l0-infra/object-array/mixin/IterableIndexedScopedArrayLike.h include/l0-infra/object-array/iterator/IndexedScopedIterator.h include/l0-infra/object-array/iterator/detail/IndexedIterator.h include/l0-infra/object-array/iterator/detail/ScopedIterator.h include/l0-infra/object-array/iterator/EmptyIterator.h include/l0-infra/object-array/view/detail/IndexedArrayView.h include/l0-infra/object-array/detail/ArrayComposer.h include/l0-infra/object-array/mixin/IndexedScopedViewFactory.h include/l0-infra/object-array/iterator/detail/SimpleIterator.h include/l0-infra/object-array/iterator/ScopedIterator.h include/l0-infra/object-array/mixin/IterableScopedArrayLike.h include/l0-infra/object-array/mixin/RValueIndexedViewFactory.h include/l0-infra/object-array/mixin/RValueRangedViewFactory.h include/l0-infra/object-array/mixin/RvalueScopedViewFactory.h include/l0-infra/base/IntOpt.h test/ut/cub/base/IntOptionalTest.cpp include/l0-infra/base/detail/DeduceIntOptional.h include/l0-infra/object-array/holder/detail/ContinuousArrayDataHolderInterface.h include/l0-infra/object-array/mixin/IndexedRefAccessor.h include/l0-infra/object-array/mixin/ByIndexAccessor.h include/l0-infra/object-array/mixin/ScopedFindExt.h include/l0-infra/object-array/concept/detail/PredTypeTrait.h include/l0-infra/object-array/mixin/ScopedByIndexAccessor.h include/l0-infra/object-array/mixin/RangedElemsCount.h include/l0-infra/object-array/mixin/ScopedElemCount.h include/l0-infra/object-array/mixin/FullScopedElemCount.h include/l0-infra/object-array/mixin/RangedScopedElemCount.h include/l0-infra/object-array/detail/ArrayScope.h include/l0-infra/object-array/holder/detail/ArrayHolderTrait.h include/l0-infra/object-array/mixin/SimpleForEach.h include/l0-infra/object-array/mixin/ArrayElemVisit.h include/l0-infra/object-array/concept/Op.h include/l0-infra/object-array/mixin/detail/ForEachCodeBlock.h include/l0-infra/object-array/concept/ElemVisitor.h include/l0-infra/object-array/concept/detail/OpTypeTrait.h include/l0-infra/object-array/mixin/SimpleForEachExt.h include/l0-infra/object-array/mixin/ScopedForEach.h include/l0-infra/object-array/mixin/ScopedForEachExt.h include/l0-infra/object-array/mixin/SimpleMutate.h include/l0-infra/object-array/mixin/RangedClear.h include/l0-infra/object-array/detail/ContinuousReadOnlyArray.h include/l0-infra/object-array/mixin/SimpleMutateExt.h include/l0-infra/object-array/mixin/ScopedCleanUp.h include/l0-infra/object-array/mixin/PredBasedMutate.h include/l0-infra/object-array/concept/SimpleMutable.h include/l0-infra/object-array/mixin/SimpleMinElem.h include/l0-infra/object-array/concept/Less.h include/l0-infra/object-array/mixin/SimpleMinElemExt.h include/l0-infra/object-array/mixin/detail/DefaultLessThan.h include/l0-infra/object-array/mixin/ScopedMinElem.h include/l0-infra/object-array/mixin/ScopedMinElemExt.h test/ut/cub/base/PlacementTest.cpp test/ut/cub/base/DeduceSizeType.cpp test/ut/cub/base/IntBitSetTest.cpp test/ut/cub/base/BitSetTest.cpp test/ut/cub/array/ViewElemTraitTest.cpp include/l0-infra/base/StructWrapper.h include/l0-infra/object-array/holder/ConstArrayViewDataHolder.h include/l0-infra/object-array/detail/ReadOnlyArrayLike.h include/l0-infra/object-array/detail/RangedReadOnlyMixins.h include/l0-infra/object-array/view/Example.h include/l0-infra/object-array/detail/ContinuousArrayLike.h include/l0-infra/object-array/mixin/ScopedSimpleForEach.h include/l0-infra/object-array/mixin/ScopedSimpleMinElem.h include/l0-infra/object-array/concept/SimpleMinElem.h include/l0-infra/object-array/concept/detail/LessTypeTrait.h include/l0-infra/object-array/config.h include/l0-infra/object-array/concept/detail/ConceptDef.h)

add_executable(object_array_test test/ut/catch.cpp ${OBJ_ARRAY_SRC})
add_executable(object_array_it test/it/main.cpp test/it/ObjectArrayTest-it.cpp)
