cmake_minimum_required(VERSION 3.19)
project(object_array)

#set(CMAKE_CXX_COMPILER "g++-10")

set(CMAKE_CXX_STANDARD 20)

include_directories(
        "${CMAKE_CURRENT_SOURCE_DIR}/include"
        "${CMAKE_CURRENT_SOURCE_DIR}/third-party"
)

if (CMAKE_CXX_COMPILER_ID MATCHES "Clang")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wdeprecated -frelaxed-template-template-args")
endif()

set(OBJ_ARRAY_SRC include/object-array/concept/SimpleFind.h include/object-array/concept/Pred.h include/object-array/mixin/NonScopedSimpleFind.h include/object-array/concept/RangedArrayLike.h test/ut/UnscopedSimpleFindTest.cpp include/object-array/mixin/SimpleFindExt.h include/cub/base/InvokeConstMethod.h include/object-array/mixin/RangedArrayLike.h include/object-array/holder/ScatteredArrayDataHolder.h include/cub/base/Placement.h include/cub/base/detail/StorageTrait.h include/cub/base/DeduceSizeType.h include/cub/base/DeduceOffsetType.h include/object-array/holder/detail/DeduceElemType.h include/object-array/holder/ArrayDataHolder.h include/object-array/holder/ObjectArrayDataHolder.h include/cub/base/IntBitSet.h include/cub/base/detail/DeduceBitSetIntType.h include/cub/base/BitSet.h include/object-array/holder/detail/ObjectTrait.h test/ut/ObjectArrayDataHolderTest.cpp test/ut/ScatteredArrayDataHolderTest.cpp include/object-array/concept/ArrayLike.h include/object-array/mixin/RangedArray.h include/object-array/mixin/detail/Mixins.h include/object-array/mixin/ContinuousArrayLike.h include/object-array/concept/ContinuousArrayLikeDataHolder.h include/object-array/concept/SimpleArrayLike.h test/ut/ObjectArrayTest.cpp include/object-array/mixin/ScopedSimpleFind.h include/object-array/concept/ScopedArrayLike.h include/object-array/mixin/ScopedFind.h test/ut/ScopedSimpleFindTest.cpp include/object-array/mixin/ScopedRangedArrayLike.h include/object-array/ScatteredArray.h test/ut/ScatteredArrayTest.cpp include/object-array/mixin/ScopedRangedArray.h include/object-array/ObjectArray.h include/object-array/holder/ArrayViewDataHolder.h include/object-array/holder/detail/ViewElemTrait.h include/object-array/ArrayView.h include/object-array/holder/detail/ArrayDataHolderConcept.h include/object-array/detail/ContinuousArrayMixin.h include/object-array/holder/RangedViewDataHolder.h include/object-array/view/Slice.h test/ut/SliceTest.cpp include/object-array/concept/IndexedContainer.h include/object-array/view/ScopedView.h include/object-array/mixin/IndexedContainer.h include/object-array/mixin/RangedViewFactory.h test/ut/ArrayViewTest.cpp include/object-array/ArrayOffset.h include/object-array/holder/ScopedViewDataHolder.h include/object-array/mixin/ScopedViewFactory.h include/object-array/view/IndexedView.h include/object-array/holder/IndexedViewDataHolder.h include/object-array/holder/detail/RangedViewDataHolderConcept.h include/object-array/detail/CrtpHelper.h include/object-array/holder/detail/ArrayLikeViewDataHolder.h include/object-array/mixin/IndexedViewFactory.h include/object-array/mixin/IterableIndexedArrayLike.h include/object-array/iterator/Iterator.h include/object-array/iterator/IndexedIterator.h include/object-array/mixin/IterableArrayLike.h include/object-array/view/IndexedScopedView.h include/object-array/mixin/IterableIndexedScopedArrayLike.h include/object-array/iterator/IndexedScopedIterator.h include/object-array/iterator/detail/IndexedIterator.h include/object-array/iterator/detail/ScopedIterator.h include/object-array/iterator/EmptyIterator.h include/object-array/view/detail/IndexedArrayView.h include/object-array/detail/ArrayComposer.h include/object-array/mixin/IndexedScopedViewFactory.h include/object-array/iterator/detail/SimpleIterator.h include/object-array/iterator/ScopedIterator.h include/object-array/mixin/IterableScopedArrayLike.h include/object-array/mixin/RValueIndexedViewFactory.h include/object-array/mixin/RValueRangedViewFactory.h include/object-array/mixin/RvalueScopedViewFactory.h include/cub/base/IntOpt.h test/ut/IntOptionalTest.cpp include/cub/base/detail/DeduceIntOptional.h)

add_executable(object_array_test test/ut/catch.cpp ${OBJ_ARRAY_SRC})
add_executable(object_array_it test/it/main.cpp test/it/ObjectArrayTest-it.cpp)
